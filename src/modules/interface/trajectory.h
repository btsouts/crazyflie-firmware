#ifndef __TRAJECTORY_H__
#define __TRAJECTORY_H__

/**
 * Header file for use with trajectory.cpp
 *
 * @author Joseph Story <jdrs3@cam.ac.uk>
 * @author Vasileios Tsoutsouras
 */

#include <float.h>
#include <string.h>

/* Public functions */
void trajectoryInit(void);
bool trajectoryTest(void);

struct mission_item_s {
	/* From navigation.h */
	float lat;				/**< latitude in degrees				*/
	float lon;				/**< longitude in degrees				*/
	float altitude;				/**< altitude in meters	(AMSL)				*/
	
	/* From mission_item_s extended for PX4 */
	float payload_weight;
    float deadline;
	
	/* For compliance with MAVSDK input files */
	int id;
    char user;
	float speed;
};


typedef struct mission_waypoint_struct {
        struct mission_item_s waypoint;
        int originalIndex;
        float departureSpeed;
} mission_waypoint_t;

typedef struct trajectory_cost_struct {
        float requiredEnergy;
        int missedDeadlines;
        float avgDelay;
} trajectory_cost_t;

typedef struct waypoints_struct {
    int id;
    char user[32];
    float lat;
    float lon;
    float alt;
    float speed;
    int deadline;
    int numOfWaypoints;
    float payload;
    int original_index;
} waypoints_t;

#define NUM_OF_WAYPOINTS 15

/* Input trajectories */



/*
float input_light_uniform_C1[NUM_OF_WAYPOINTS][7] = {
	{52.21180772, 0.09320734, 20.0, 5, 281.4, 0.1663, 0.1663},
	{52.2110649, 0.09678633, 20.0, 5, 512.5, 0.1982, 0.1982},
	{52.21377668, 0.0935218, 20.0, 5, 474.8, 0.1352, 0.1352},
	{52.21418001, 0.09333263, 20.0, 5, 525.6, 0.1933, 0.1933},
	{52.21152987, 0.09270965, 20.0, 5, 306.3, 0.1332, 0.1332},
	{52.21155409, 0.09558663, 20.0, 5, 486.0, 0.1988, 0.1988},
	{52.21068406, 0.09292273, 20.0, 5, 381.1, 0.1027, 0.1027},
	{52.21087176, 0.09663794, 20.0, 5, 361.3, 0.1056, 0.1056},
	{52.21181962, 0.096139, 20.0, 5, 277.0, 0.1164, 0.1164},
	{52.21161347, 0.09500653, 20.0, 5, 351.0, 0.1097, 0.1097},
	{52.21064444, 0.09595266, 20.0, 5, 333.7, 0.144, 0.144},
	{52.21276691, 0.09399633, 20.0, 5, 428.0, 0.1266, 0.1266},
	{52.21363406, 0.09690816, 20.0, 5, 439.6, 0.1248, 0.1248},
	{52.21326764, 0.09313378, 20.0, 5, 402.8, 0.1253, 0.1253},
	{52.21362685, 0.09419598, 20.0, 5, 437.2, 0.1097, 0.1097}
};

float input_light_uniform_C2[NUM_OF_WAYPOINTS][7] = {
	{52.21159883, 0.09614392, 20.0, 5, 362.8, 0.1051, 0.1051},
	{52.2104897, 0.09340423, 20.0, 5, 274.9, 0.1506, 0.1506},
	{52.21174408, 0.09595409, 20.0, 5, 307.0, 0.1866, 0.1866},
	{52.2115385, 0.0950004, 20.0, 5, 404.9, 0.1996, 0.1996},
	{52.21245846, 0.09570953, 20.0, 5, 279.2, 0.1974, 0.1974},
	{52.21276454, 0.09672274, 20.0, 5, 380.7, 0.1093, 0.1093},
	{52.21362576, 0.09306321, 20.0, 5, 498.4, 0.1956, 0.1956},
	{52.21468029, 0.09380301, 20.0, 5, 414.2, 0.1152, 0.1152},
	{52.21211687, 0.09601714, 20.0, 5, 374.5, 0.1532, 0.1532},
	{52.21274808, 0.09630031, 20.0, 5, 531.1, 0.1745, 0.1745},
	{52.21203097, 0.09613209, 20.0, 5, 356.7, 0.1071, 0.1071},
	{52.21380654, 0.09495327, 20.0, 5, 341.4, 0.1734, 0.1734},
	{52.21240867, 0.09290343, 20.0, 5, 395.2, 0.1601, 0.1601},
	{52.21120886, 0.09448078, 20.0, 5, 480.9, 0.1939, 0.1939},
	{52.21392993, 0.09557269, 20.0, 5, 334.7, 0.1621, 0.1621}
};

float input_light_uniform_C3[NUM_OF_WAYPOINTS][7] = {
	{52.2140878, 0.09314679, 20.0, 5, 402.1, 0.135, 0.135},
	{52.21085185, 0.09598912, 20.0, 5, 389.0, 0.1248, 0.1248},
	{52.21098644, 0.09518131, 20.0, 5, 351.8, 0.1984, 0.1984},
	{52.21044813, 0.09339693, 20.0, 5, 328.7, 0.1659, 0.1659},
	{52.21130482, 0.09598366, 20.0, 5, 420.0, 0.1166, 0.1166},
	{52.21082707, 0.09587952, 20.0, 5, 320.5, 0.1602, 0.1602},
	{52.21402725, 0.09486808, 20.0, 5, 321.6, 0.1888, 0.1888},
	{52.21364466, 0.0939971, 20.0, 5, 525.0, 0.162, 0.162},
	{52.21332203, 0.09321042, 20.0, 5, 435.7, 0.1516, 0.1516},
	{52.21173015, 0.09377405, 20.0, 5, 403.2, 0.1431, 0.1431},
	{52.21169094, 0.09386204, 20.0, 5, 428.1, 0.1979, 0.1979},
	{52.21203637, 0.09681321, 20.0, 5, 277.0, 0.1336, 0.1336},
	{52.21318756, 0.09544701, 20.0, 5, 315.5, 0.1289, 0.1289},
	{52.21086671, 0.09536361, 20.0, 5, 399.4, 0.109, 0.109},
	{52.21118449, 0.09673836, 20.0, 5, 519.3, 0.1453, 0.1453}
};

float input_mid_uniform_C1[NUM_OF_WAYPOINTS][7] = {
	{52.21445581, 0.09278065, 20.0, 5, 480.4, 0.1743, 0.1743},
	{52.2111276, 0.0957533, 20.0, 5, 387.8, 0.343, 0.343},
	{52.21051854, 0.09689163, 20.0, 5, 527.5, 0.1957, 0.1957},
	{52.21195997, 0.0930134, 20.0, 5, 502.1, 0.1828, 0.1828},
	{52.21306963, 0.09274725, 20.0, 5, 436.9, 0.1421, 0.1421},
	{52.21410995, 0.09584816, 20.0, 5, 479.5, 0.3633, 0.3633},
	{52.21138862, 0.09511174, 20.0, 5, 286.7, 0.3691, 0.3691},
	{52.2107797, 0.0950613, 20.0, 5, 366.2, 0.3116, 0.3116},
	{52.2138538, 0.09619901, 20.0, 5, 428.0, 0.146, 0.146},
	{52.21323455, 0.09450377, 20.0, 5, 366.2, 0.1631, 0.1631},
	{52.2106182, 0.09544014, 20.0, 5, 471.1, 0.3744, 0.3744},
	{52.21168714, 0.09571479, 20.0, 5, 484.6, 0.3945, 0.3945},
	{52.21320493, 0.0950717, 20.0, 5, 495.7, 0.3461, 0.3461},
	{52.21244282, 0.09429375, 20.0, 5, 488.1, 0.3026, 0.3026},
	{52.21089286, 0.09589952, 20.0, 5, 304.5, 0.2106, 0.2106}
};

float input_mid_uniform_C2[NUM_OF_WAYPOINTS][7] = {
	{52.21403328, 0.09380779, 20.0, 5, 362.1, 0.3535, 0.3535},
	{52.21238324, 0.09369016, 20.0, 5, 453.3, 0.2592, 0.2592},
	{52.21096315, 0.09505287, 20.0, 5, 470.3, 0.3877, 0.3877},
	{52.21056448, 0.09369268, 20.0, 5, 293.5, 0.3814, 0.3814},
	{52.21079097, 0.09650878, 20.0, 5, 296.3, 0.3834, 0.3834},
	{52.214532, 0.0933607, 20.0, 5, 356.0, 0.223, 0.223},
	{52.21107038, 0.09477952, 20.0, 5, 344.4, 0.1067, 0.1067},
	{52.21195224, 0.09390781, 20.0, 5, 497.8, 0.1944, 0.1944},
	{52.21164902, 0.09545492, 20.0, 5, 350.2, 0.3091, 0.3091},
	{52.21079102, 0.09436943, 20.0, 5, 529.3, 0.3734, 0.3734},
	{52.21261463, 0.09609637, 20.0, 5, 488.4, 0.1832, 0.1832},
	{52.21330526, 0.09655648, 20.0, 5, 489.6, 0.359, 0.359},
	{52.21269477, 0.0956371, 20.0, 5, 334.0, 0.2498, 0.2498},
	{52.21475815, 0.09625319, 20.0, 5, 382.5, 0.1117, 0.1117},
	{52.21443721, 0.09326376, 20.0, 5, 397.0, 0.2452, 0.2452}
};

float input_mid_uniform_C3[NUM_OF_WAYPOINTS][7] = {
	{52.2123032, 0.09576251, 20.0, 5, 392.8, 0.3361, 0.3361},
	{52.21377752, 0.09639944, 20.0, 5, 321.5, 0.1044, 0.1044},
	{52.2113946, 0.09429751, 20.0, 5, 466.4, 0.3224, 0.3224},
	{52.21232432, 0.09522095, 20.0, 5, 396.3, 0.1631, 0.1631},
	{52.21109151, 0.09378717, 20.0, 5, 509.9, 0.3665, 0.3665},
	{52.21242762, 0.0943109, 20.0, 5, 340.8, 0.2512, 0.2512},
	{52.21331209, 0.09445663, 20.0, 5, 524.0, 0.3946, 0.3946},
	{52.21073715, 0.09306657, 20.0, 5, 310.9, 0.1836, 0.1836},
	{52.21242527, 0.09415277, 20.0, 5, 508.0, 0.2844, 0.2844},
	{52.21108924, 0.09326221, 20.0, 5, 377.8, 0.3608, 0.3608},
	{52.21158982, 0.09445599, 20.0, 5, 438.6, 0.3349, 0.3349},
	{52.21199359, 0.09429234, 20.0, 5, 408.9, 0.167, 0.167},
	{52.21063456, 0.09310588, 20.0, 5, 412.1, 0.2578, 0.2578},
	{52.21427798, 0.09277784, 20.0, 5, 388.6, 0.1758, 0.1758},
	{52.21279883, 0.09272201, 20.0, 5, 344.3, 0.2871, 0.2871}
};

float input_heavy_uniform_C1[NUM_OF_WAYPOINTS][7] = {
	{52.21217922, 0.0938953, 20.0, 5, 488.7, 0.4872, 0.4872},
	{52.21327293, 0.09544734, 20.0, 5, 434.7, 0.5618, 0.5618},
	{52.21345347, 0.09270276, 20.0, 5, 483.4, 0.3466, 0.3466},
	{52.21416654, 0.09391418, 20.0, 5, 438.5, 0.5766, 0.5766},
	{52.2137841, 0.09460303, 20.0, 5, 329.5, 0.5518, 0.5518},
	{52.21354808, 0.09622399, 20.0, 5, 477.3, 0.5334, 0.5334},
	{52.21387739, 0.09610363, 20.0, 5, 301.9, 0.7319, 0.7319},
	{52.21288024, 0.09643901, 20.0, 5, 450.3, 0.3493, 0.3493},
	{52.21375242, 0.09630726, 20.0, 5, 366.5, 0.6048, 0.6048},
	{52.21459106, 0.09498865, 20.0, 5, 329.9, 0.6603, 0.6603},
	{52.21125022, 0.09474789, 20.0, 5, 272.2, 0.4884, 0.4884},
	{52.2106052, 0.09275519, 20.0, 5, 333.1, 0.692, 0.692},
	{52.21131578, 0.09660168, 20.0, 5, 446.8, 0.6683, 0.6683},
	{52.21357458, 0.09266969, 20.0, 5, 304.0, 0.2776, 0.2776},
	{52.21250978, 0.0968986, 20.0, 5, 472.2, 0.6633, 0.6633}
};

float input_heavy_uniform_C2[NUM_OF_WAYPOINTS][7] = {
	{52.21245371, 0.09465077, 20.0, 5, 339.1, 0.4501, 0.4501},
	{52.21201828, 0.09627902, 20.0, 5, 386.0, 0.7916, 0.7916},
	{52.21315192, 0.09505075, 20.0, 5, 367.3, 0.1818, 0.1818},
	{52.21334122, 0.0927696, 20.0, 5, 296.2, 0.3874, 0.3874},
	{52.21360425, 0.09481928, 20.0, 5, 372.3, 0.1875, 0.1875},
	{52.21231861, 0.09274247, 20.0, 5, 491.1, 0.5225, 0.5225},
	{52.2126816, 0.09457918, 20.0, 5, 341.6, 0.5695, 0.5695},
	{52.2142011, 0.09552749, 20.0, 5, 294.0, 0.6306, 0.6306},
	{52.21339225, 0.09609713, 20.0, 5, 315.8, 0.4475, 0.4475},
	{52.21100524, 0.09377378, 20.0, 5, 282.7, 0.3268, 0.3268},
	{52.21109486, 0.0968503, 20.0, 5, 429.4, 0.2738, 0.2738},
	{52.21058457, 0.0931309, 20.0, 5, 478.4, 0.7098, 0.7098},
	{52.21225286, 0.09479116, 20.0, 5, 525.6, 0.317, 0.317},
	{52.21306179, 0.09641232, 20.0, 5, 485.3, 0.2622, 0.2622},
	{52.21297829, 0.09635458, 20.0, 5, 379.0, 0.7727, 0.7727}
};

float input_heavy_uniform_C3[NUM_OF_WAYPOINTS][7] = {
	{52.21234024, 0.09383887, 20.0, 5, 412.8, 0.4735, 0.4735},
	{52.21283381, 0.09423347, 20.0, 5, 399.8, 0.222, 0.222},
	{52.21363838, 0.09539856, 20.0, 5, 319.2, 0.2488, 0.2488},
	{52.21058693, 0.09378891, 20.0, 5, 500.9, 0.584, 0.584},
	{52.2137594, 0.0941487, 20.0, 5, 304.5, 0.7786, 0.7786},
	{52.21238859, 0.09324572, 20.0, 5, 266.7, 0.3947, 0.3947},
	{52.21272158, 0.0955278, 20.0, 5, 428.0, 0.3812, 0.3812},
	{52.21155834, 0.09463564, 20.0, 5, 395.1, 0.52, 0.52},
	{52.21409789, 0.09271572, 20.0, 5, 365.6, 0.1864, 0.1864},
	{52.21286482, 0.09387075, 20.0, 5, 517.8, 0.1184, 0.1184},
	{52.21155905, 0.09419785, 20.0, 5, 281.1, 0.5116, 0.5116},
	{52.21430399, 0.09659724, 20.0, 5, 321.4, 0.1504, 0.1504},
	{52.21283956, 0.09587064, 20.0, 5, 276.7, 0.5145, 0.5145},
	{52.2139407, 0.09593817, 20.0, 5, 388.6, 0.3102, 0.3102},
	{52.21132476, 0.09631464, 20.0, 5, 318.4, 0.2085, 0.2085}
};
*/

#endif /* __TRAJECTORY_H__ */
